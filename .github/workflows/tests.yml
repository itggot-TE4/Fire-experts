name: tests

on: [push]

jobs:
  acceptance-tests:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1
    - name: Setup Ruby, JRuby and TruffleRuby
      uses: ruby/setup-ruby@v1.47.0
    - name: Run all acceptance tests
      run: |
        bundle install
        rake run

  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Lint Code Base
        uses: github/super-linter@v3
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          RUBY_CONFIG_FILE: .rubocop.yml
          VALIDATE_MARKDOWN: false
          VALIDATE_JAVASCRIPT_STANDARD: false
          VALIDATE_HTML: false
          LINTER_RULES_PATH: ./
